<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-input/paper-input-behavior.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-material/paper-material.html">
<link rel="import" href="../paper-listbox/paper-listbox.html">
<link rel="import" href="../iron-icons/social-icons.html">
<link rel="import" href="../iron-form/iron-form.html">
<link rel="import" href="../ct-shared-styles/ct-application-theme.html">
<link rel="import" href="../mercury-paginator/mercury-paginator.html">

<!--
`ct-manage-staff`
View all staff members their status and roles

@demo demo/index.html
-->

<dom-module id="ct-manage-staff">
    <template>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

        <style is="custom-style">
            :host {

                display: block;

                --paper-input-container:  {
                    border-top:1px solid #ccc;
                    border-left:1px solid #ccc;
                    border-right:1px solid #ccc;
                    border-bottom: none;
                    padding: 0;
                    /*  margin-bottom: 24px; */
                };

                /*padding to move from border */


                --paper-input-container-label: {
                    margin-left: 10px;
                };
                --paper-input-container-label-floating: {
                    margin-left: 10px;
                };


                --paper-input-error: {
                    left: auto !important;
                    right: 20px !important;
                    font-style: italic;
                };

                /*--paper-icon-button-ink-color: var(--breadcrumb-icon-color-ripple);*/
            }


            iron-icon.user-online{
                --iron-icon-fill-color:{#4d96bb;};

            }
            /*local dropdown menu */
            paper-menu {
                width: 400px;
            }
            paper-dropdown-menu.custom-dropdown {
                width: 100%;
                --paper-input-container: {
                    border-top:1px solid #ccc;
                    border-left:1px solid #ccc;
                    border-right:1px solid #ccc;
                    border-bottom: none;
                    padding: 0;
                    margin-bottom: 8px;
                };
                --paper-input-container-input: {
                    padding-left: 10px;
                };
            }

        </style>
        <div class="main-section">
            <div class="container-fluid">

                <!--todo enable once endpoint supports functionality-->
                <!--<div class="row">-->
                <!--<div class="col-xs-12 col-sm-7">-->
                <!--<paper-input label="Find Record" placeholder="Search for building name, address, status" type="text" name="" value="" auto-validate pattern="[a-zA-Z 0-9]*" error-message="Require letters and numbers"></paper-input>-->
                <!--</div>-->
                <!--<div class="col-xs-12 col-sm-3">-->
                <!--<paper-dropdown-menu class="custom-dropdown" label="Status" noink no-animations>-->
                <!--<paper-listbox class="dropdown-content" selected="1">-->
                <!--<paper-item>All</paper-item>-->
                <!--<paper-item>Online</paper-item>-->
                <!--<paper-item>Offline</paper-item>-->
                <!--</paper-listbox>-->
                <!--</paper-dropdown-menu>-->
                <!--</div>-->
                <!--<div class="col-xs-12 col-sm-2">-->
                <!--<paper-button class="fancy margin-4v primary">Search</paper-button>-->
                <!--</div>-->
                <!--<div class="col-xs-12 col-sm-3">-->
                <!--<paper-button class="fancy margin-10v">New Member</paper-button>-->
                <!--</div>-->
                <!--</div>-->

                <div class="row">
                    <div class="col-xs-12">
                        <paper-dropdown-menu class="custom-dropdown" label="Staff Group" always-float-label noink no-animations>
                            <paper-listbox class="dropdown-content" selected="0" attr-for-selected="value">
                                <template is="dom-repeat" items="{{userGroups}}">
                                    <paper-item value="[[item.id]]">[[item.name]]</paper-item>
                                </template>
                            </paper-listbox>
                        </paper-dropdown-menu>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xs-12 col-sm-3 col-sm-offset-9">
                        <paper-button class="fancy margin-10v btn btn-default btn-block" raised on-tap="_newStaff">New Member</paper-button>
                    </div>
                </div>

                <div class="row">
                    <div class="col-xs-12">
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered table-hover table-middle">
                                <thead>
                                <th>Staff Member Name</th>
                                <th>Role</th>
                                <!--<th>Status</th>-->
                                <th>Action</th>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>John Doe</td>
                                    <td>Support Agent</td>
                                    <!--<td>Offline</td>-->
                                    <td class="text-center"><paper-button class="table-button btn-primary btn-sm" on-tap="_viewSingleStaff" raised>View</paper-button></td>
                                </tr>

                                <template is="dom-repeat" items="{{staffList}}">
                                    <tr>
                                        <td>[[item.name]]</td>
                                        <td>[[item.group]]</td>
                                        <!--<td>[[item.status]]</td>-->
                                        <td class="text-center"><paper-button class="table-button btn-primary btn-sm" on-tap="_viewSingleStaff" raised>View</paper-button></td>
                                    </tr>
                                </template>

                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="col-xs-12">
                        <nav aria-label="Page navigation">
                            <mercury-paginator perpage="50" items="{{staffList}}"></mercury-paginator>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <script>
        Polymer({

            is: 'ct-manage-staff',

            properties: {
                staffList: Array,
                userGroups: Array,
            },

            _viewSingleStaff : function(e) {

                if(e.model && e.model.item.id){
                    this.fire('viewStaff', id);
                } else {
                    console.log('error');
                    this.fire('toast', {message: 'Cannot display staff member', type: 'danger'});
                }

            },

            _newStaff : function(){
                this.fire('newStaff');
            }

        });
    </script>
</dom-module>
